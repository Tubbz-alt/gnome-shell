From 3013e942d862840e46eb07de9e84f9d80e7e13cc Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Fr=C3=A9d=C3=A9ric=20P=C3=A9ters?= <fpeters@0d.be>
Date: Sun, 4 Sep 2011 15:29:38 +0200
Subject: [PATCH] Also respect NoDisplay semantics for applications menu

https://bugzilla.gnome.org/show_bug.cgi?id=658176
---
 src/shell-app-system.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

Index: gnome-shell-3.4.1/src/shell-app-system.c
===================================================================
--- gnome-shell-3.4.1.orig/src/shell-app-system.c	2012-04-10 20:14:57.000000000 +0200
+++ gnome-shell-3.4.1/src/shell-app-system.c	2012-05-19 09:44:13.135666332 +0200
@@ -101,11 +101,7 @@
                                                    NULL,
                                                    (GDestroyNotify)g_object_unref);
 
-  /* For now, we want to pick up Evince, Nautilus, etc.  We'll
-   * handle NODISPLAY semantics at a higher level or investigate them
-   * case by case.
-   */
-  priv->apps_tree = gmenu_tree_new ("applications.menu", GMENU_TREE_FLAGS_INCLUDE_NODISPLAY);
+  priv->apps_tree = gmenu_tree_new ("applications.menu", 0);
   g_signal_connect (priv->apps_tree, "changed", G_CALLBACK (on_apps_tree_changed_cb), self);
 
   priv->settings_tree = gmenu_tree_new ("gnomecc.menu", 0);
